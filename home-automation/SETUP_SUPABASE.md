# –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [supabase.com](https://supabase.com)
2. –ù–∞–∂–º–∏—Ç–µ **"Start your project"** –∏–ª–∏ **"Sign In"**
3. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
4. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name:** `home-automation` (–∏–ª–∏ –ª—é–±–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
   - **Database Password:** –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region:** –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, EU Central)
   - **Pricing Plan:** Free (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
6. –ù–∞–∂–º–∏—Ç–µ **"Create new project"**
7. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **"SQL Editor"**
2. –ù–∞–∂–º–∏—Ç–µ **"New query"**
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `supabase-schema.sql` –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** —Ñ–∞–π–ª–∞
5. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
6. –ù–∞–∂–º–∏—Ç–µ **"Run"** (–∏–ª–∏ Ctrl+Enter)
7. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å **"Success. No rows returned"**

**–ß—Ç–æ —Å–æ–∑–¥–∞–ª–æ—Å—å:**
- –¢–∞–±–ª–∏—Ü–∞ `sensor_readings` - –¥–ª—è –ø–æ–∫–∞–∑–∞–Ω–∏–π –¥–∞—Ç—á–∏–∫–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ `rooms` - –¥–ª—è –∫–æ–º–Ω–∞—Ç (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏)
- –¢–∞–±–ª–∏—Ü–∞ `rules` - –¥–ª—è –ø—Ä–∞–≤–∏–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Å –ø—Ä–∏–º–µ—Ä–æ–º)
- –¢–∞–±–ª–∏—Ü–∞ `controller_commands` - –¥–ª—è –∫–æ–º–∞–Ω–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É
- –¢–∞–±–ª–∏—Ü–∞ `alerts` - –¥–ª—è –æ–ø–æ–≤–µ—â–µ–Ω–∏–π
- –¢–∞–±–ª–∏—Ü–∞ `system_status` - –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º

## –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **"Settings"** (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∏ –≤–Ω–∏–∑—É)
2. –í—ã–±–µ—Ä–∏—Ç–µ **"API"**
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"Project API keys"**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è:

   **Project URL:**
   ```
   https://xxxxxxxxxxxxx.supabase.co
   ```

   **anon public (–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á):**
   ```
   eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ö–æ–ø–∏—Ä—É–π—Ç–µ `anon` –∫–ª—é—á, –ù–ï `service_role`!
- `service_role` –∫–ª—é—á –¥–µ—Ä–∂–∏—Ç–µ –≤ —Å–µ–∫—Ä–µ—Ç–µ!

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env.local

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ó–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

## –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000)

**–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!** ‚úÖ

## –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ SQL Editor

1. –í Supabase –æ—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor**
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
3. –í—Å—Ç–∞–≤—å—Ç–µ:

```sql
-- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤
INSERT INTO sensor_readings (sensor_type, value, unit, location) VALUES
  ('temperature_indoor', 22.5, '¬∞C', '–ì–æ—Å—Ç–∏–Ω–∞—è'),
  ('temperature_indoor', 21.0, '¬∞C', '–°–ø–∞–ª—å–Ω—è'),
  ('temperature_indoor', 23.0, '¬∞C', '–ö—É—Ö–Ω—è'),
  ('temperature_outdoor', 5.2, '¬∞C', NULL),
  ('temperature_heating_supply', 72.5, '¬∞C', NULL),
  ('temperature_heating_return', 52.0, '¬∞C', NULL),
  ('humidity_indoor', 45, '%', '–ì–æ—Å—Ç–∏–Ω–∞—è'),
  ('humidity_outdoor', 75, '%', NULL),
  ('pressure_outdoor', 758, '–º–º —Ä—Ç.—Å—Ç.', NULL),
  ('power_consumption', 3.2, '–∫–í—Ç', NULL),
  ('voltage', 232, '–í', NULL);
```

4. –ù–∞–∂–º–∏—Ç–µ **Run**
5. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ!

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ `scripts/generate-test-data.js`
2. –ó–∞–º–µ–Ω–∏—Ç–µ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:
   ```javascript
   const SUPABASE_URL = 'https://xxxxxxxxxxxxx.supabase.co';
   const SUPABASE_KEY = '–≤–∞—à-anon-–∫–ª—é—á';
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   node scripts/generate-test-data.js
   ```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç 24 —á–∞—Å–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö –¥–∞—Ç—á–∏–∫–æ–≤!

### –í–∞—Ä–∏–∞–Ω—Ç –í: –ß–µ—Ä–µ–∑ API

```bash
curl -X POST http://localhost:3000/api/sensors \
  -H "Content-Type: application/json" \
  -d '{
    "sensor_type": "temperature_indoor",
    "value": 22.5,
    "unit": "¬∞C",
    "location": "–ì–æ—Å—Ç–∏–Ω–∞—è"
  }'
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/`):
   - –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –¥–∞—Ç—á–∏–∫–æ–≤
   - –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ - –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏—è
   - –ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö - –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –Ω—É–ª–∏

2. **–ì—Ä–∞—Ñ–∏–∫–∏** (`/charts`):
   - –ì—Ä–∞—Ñ–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä
   - –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ - —É–≤–∏–¥–∏—Ç–µ –ª–∏–Ω–∏–∏
   - –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –ø–µ—Ä–∏–æ–¥ (1—á, 6—á, 24—á, 7–¥)

3. **–ü—Ä–∞–≤–∏–ª–∞** (`/rules`):
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–¥–Ω–æ –ø—Ä–∞–≤–∏–ª–æ "–í—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–¥–∞—á–∏"
   - –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å

4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (`/control`):
   - 5 –∫–æ–º–Ω–∞—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
   - –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–ø–ª–µ–Ω–∏–µ–º
   - –ü—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–æ–º–∞–Ω–¥ (–ø–æ–∫–∞)

## Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```sql
   INSERT INTO sensor_readings (sensor_type, value, unit)
   VALUES ('temperature_indoor', 25.0, '¬∞C');
   ```
4. –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ **–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**!

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ "Invalid supabaseUrl"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –∏–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ `.env.local`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `https://`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `.env.local` –Ω–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (`npm run dev`)

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—É—Å—Ç–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–º. –®–∞–≥ 6)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SQL —Å—Ö–µ–º–∞ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ

### Real-time –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** Realtime –Ω–µ –≤–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–∞–±–ª–∏—Ü

**–†–µ—à–µ–Ω–∏–µ:**
1. –í Supabase –æ—Ç–∫—Ä–æ–π—Ç–µ **Database ‚Üí Replication**
2. –ù–∞–π–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `sensor_readings`
3. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å–ø—Ä–∞–≤–∞
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü

### CORS –æ—à–∏–±–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `NEXT_PUBLIC_` –ø—Ä–µ—Ñ–∏–∫—Å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `anon` –∫–ª—é—á (–Ω–µ `service_role`)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### Row Level Security (RLS)

–î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–∫–ª—é—á–∏—Ç—å RLS:

```sql
-- –í–∫–ª—é—á–∏—Ç—å RLS
ALTER TABLE sensor_readings ENABLE ROW LEVEL SECURITY;

-- –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º —á–∏—Ç–∞—Ç—å
CREATE POLICY "Enable read access for all users"
ON sensor_readings FOR SELECT
USING (true);

-- –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å
CREATE POLICY "Enable insert access for all users"
ON sensor_readings FOR INSERT
WITH CHECK (true);
```

**–î–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RLS –º–æ–∂–Ω–æ –Ω–µ –≤–∫–ª—é—á–∞—Ç—å.**

### Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –í Supabase –æ—Ç–∫—Ä–æ–π—Ç–µ **Database ‚Üí Backups**
2. –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –±—ç–∫–∞–ø—ã 7 –¥–Ω–µ–π
3. –ú–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å SQL –¥–∞–º–ø

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ Supabase –Ω–∞—Å—Ç—Ä–æ–µ–Ω
2. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–ß—Ç–æ –¥–∞–ª—å—à–µ:**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã (—Å–º. QUICKSTART.md)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏ (—Å–º. examples/)
- –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ Vercel (—Å–º. README.md)

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Supabase Documentation](https://supabase.com/docs)
- [Supabase Dashboard](https://app.supabase.com)
- [SQL Reference](https://supabase.com/docs/guides/database)

---

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É–º–Ω–æ–≥–æ –¥–æ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ
